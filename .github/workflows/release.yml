name: Create Release

on:
  workflow_call:
    secrets:
      RELEASE_TOKEN:
        required: true  

jobs:
  release-please:
    name: Create Release Changelog
    runs-on: ubuntu-latest
    steps:
      - uses: google-github-actions/release-please-action@v3
        if: startsWith(github.event.head_commit.message, 'feat') || startsWith(github.event.head_commit.message, 'fix') || startsWith(github.event.head_commit.message, 'docs') || startsWith(github.event.head_commit.message, 'style') || startsWith(github.event.head_commit.message, 'refactor') || startsWith(github.event.head_commit.message, 'perf') || startsWith(github.event.head_commit.message, 'test') || startsWith(github.event.head_commit.message, 'build') || startsWith(github.event.head_commit.message, 'ci') || startsWith(github.event.head_commit.message, 'chore') || startsWith(github.event.head_commit.message, 'revert')
        with:
          token: ${{ secrets.RELEASE_TOKEN }}
          release-type: node
          pull-request-title-pattern: 'release v${version}'
          changelog-types: '[{"type": "types", "section":"Types", "hidden": false},{"type": "revert", "section":"âªï¸Reverts", "hidden": false},{"type": "feat", "section": "âœ¨Features", "hidden": false},{"type": "fix", "section": "ğŸ›Bug Fixes", "hidden": false},{"type": "improvement", "section": "âš™ï¸Feature Improvements", "hidden": false},{"type": "docs", "section":"ğŸ“šDocs", "hidden": false},{"type": "style", "section":"ğŸ¨Styling", "hidden": false},{"type": "refactor", "section":"â™»ï¸Code Refactoring", "hidden": false},{"type": "perf", "section":"âš¡ï¸Performance Improvements", "hidden": false},{"type": "test", "section":"ğŸ§ªTests", "hidden": false},{"type": "build", "section":"ğŸ“¦ï¸Build System", "hidden": false},{"type": "ci", "section":"ğŸ¡CI", "hidden":false}]'



